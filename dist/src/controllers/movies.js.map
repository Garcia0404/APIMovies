{"version":3,"sources":["../../../src/controllers/movies.js"],"sourcesContent":["import { validationMovie, validationMoviePartial } from '../schemas/validationMovie.js'\r\nexport class MovieController {\r\n  constructor({movieModel}){\r\n    this.movieModel = movieModel\r\n  }\r\n  getAll = async(req,res) => {\r\n    const result = await this.movieModel.getAll()\r\n    res.json(result)\r\n  }\r\n  create = async(req,res) => {\r\n    const movieValidated = validationMovie(req.body)\r\n    if(movieValidated.error){\r\n      return res.status(422).json({ message: 'Unprocessable Content',error:JSON.parse(movieValidated.error)})\r\n    }\r\n    const result = await this.movieModel.create({movie:movieValidated.data})\r\n    res.json(result)\r\n  }\r\n  getById = async(req,res) => {\r\n    const {id} = req.params\r\n    const result = await this.movieModel.getById({id:id})\r\n    if(!result) return res.status(404).json({message:\"Id not exist\"})\r\n    res.json(result)\r\n  }\r\n  update = async(req,res) => {\r\n    const {id} = req.params\r\n    const movieValidated = validationMoviePartial(req.body)\r\n    if(movieValidated.error){\r\n      return res.status(422).json({message:\"Unprocessable Entity\",error:JSON.parse(movieValidated.error)})\r\n    }\r\n    const result = await this.movieModel.update({id:id,update:movieValidated.data})\r\n    if(!result) return res.status(404).json({message:\"Id not exist\"})\r\n    res.json(result)\r\n  }\r\n}"],"names":["validationMovie","validationMoviePartial","MovieController","movieModel","getAll","req","res","result","json","create","movieValidated","body","error","status","message","JSON","parse","movie","data","getById","id","params","update"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,eAAe,EAAEC,sBAAsB,QAAQ,gCAA+B;AACvF,OAAO,IAAA,AAAMC,kBAAN,SAAMA,gBACC,KAAY;;QAAZ,AAACC,aAAD,MAACA;4BADFD;;IAIXE,uBAAAA;mBAAS,oBAAA,SAAMC,KAAIC;gBACXC;;;;wBAAS;;4BAAM,MAAKJ,UAAU,CAACC,MAAM;;;wBAArCG,SAAS;wBACfD,IAAIE,IAAI,CAACD;;;;;;QACX;wBAHeF,KAAIC;;;;;IAInBG,uBAAAA;mBAAS,oBAAA,SAAMJ,KAAIC;gBACXI,gBAIAH;;;;wBAJAG,iBAAiBV,gBAAgBK,IAAIM,IAAI;wBAC/C,IAAGD,eAAeE,KAAK,EAAC;4BACtB;;gCAAON,IAAIO,MAAM,CAAC,KAAKL,IAAI,CAAC;oCAAEM,SAAS;oCAAwBF,OAAMG,KAAKC,KAAK,CAACN,eAAeE,KAAK;gCAAC;;wBACvG;wBACe;;4BAAM,OAAKT,UAAU,CAACM,MAAM,CAAC;gCAACQ,OAAMP,eAAeQ,IAAI;4BAAA;;;wBAAhEX,SAAS;wBACfD,IAAIE,IAAI,CAACD;;;;;;QACX;wBAPeF,KAAIC;;;;;IAQnBa,uBAAAA;mBAAU,oBAAA,SAAMd,KAAIC;gBACXc,IACDb;;;;wBADCa,KAAMf,IAAIgB,MAAM,CAAhBD;wBACQ;;4BAAM,OAAKjB,UAAU,CAACgB,OAAO,CAAC;gCAACC,IAAGA;4BAAE;;;wBAA7Cb,SAAS;wBACf,IAAG,CAACA,QAAQ;;4BAAOD,IAAIO,MAAM,CAAC,KAAKL,IAAI,CAAC;gCAACM,SAAQ;4BAAc;;wBAC/DR,IAAIE,IAAI,CAACD;;;;;;QACX;wBALgBF,KAAIC;;;;;IAMpBgB,uBAAAA;mBAAS,oBAAA,SAAMjB,KAAIC;gBACVc,IACDV,gBAIAH;;;;wBALCa,KAAMf,IAAIgB,MAAM,CAAhBD;wBACDV,iBAAiBT,uBAAuBI,IAAIM,IAAI;wBACtD,IAAGD,eAAeE,KAAK,EAAC;4BACtB;;gCAAON,IAAIO,MAAM,CAAC,KAAKL,IAAI,CAAC;oCAACM,SAAQ;oCAAuBF,OAAMG,KAAKC,KAAK,CAACN,eAAeE,KAAK;gCAAC;;wBACpG;wBACe;;4BAAM,OAAKT,UAAU,CAACmB,MAAM,CAAC;gCAACF,IAAGA;gCAAGE,QAAOZ,eAAeQ,IAAI;4BAAA;;;wBAAvEX,SAAS;wBACf,IAAG,CAACA,QAAQ;;4BAAOD,IAAIO,MAAM,CAAC,KAAKL,IAAI,CAAC;gCAACM,SAAQ;4BAAc;;wBAC/DR,IAAIE,IAAI,CAACD;;;;;;QACX;wBATeF,KAAIC;;;;IApBjB,IAAI,CAACH,UAAU,GAAGA;EA8BrB"}